# hexo搭建博客

## 搭建前的软件准备（git，node）

官方教程： [文档 | Hexo](https://hexo.io/zh-cn/docs/)

- [Node.js](http://nodejs.org/) (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)
- [Git](http://git-scm.com/)

### git安装

安装

```shell
sudo apt-get install git-core
```

配置

TODO(lulu-DT)

### Node.js安装

> 这个有版本要求，所以最好自己去[官网](http://nodejs.org/)下载

```shell
# 下载安装包
wget https://nodejs.org/dist/v14.15.0/node-v14.15.0-linux-x64.tar.xz

# 解压
xz -d node-v14.15.0-linux-x64.tar.xz
tar -xf node-v14.15.0-linux-x64.tar

# 将应用路径加入到环境变量(可以自行考虑是否加入到bashrc或者zshrc)
cd node-v14.15.0-linux-x64/bin
export PATH=$PATH:$(pwd)

# 检查一下是否可用
node -v
# v14.15.0 (如果出现版本号说明安装成功)
```

## 安装hexo

```shell
npm install -g hexo-cli
```

## 初始化

```shell
$ hexo init <folder>
$ cd <folder>
$ npm install

# 生成静态页面
hexo g
```

## 测试

### 开放服务器80端口

> 云服务器需要[开放80端口](https://developer.aliyun.com/article/1209367)才能在主机上访问页面

进入到服务器控制台的安全组，点击快速添加规则

![image-20240123140321738](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123140321738.png)

添加新规则

![image-20240123140427591](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123140427591.png)

### 启动hexo服务器

```shell
hexo s -p 80
```

- `-p`: 指定端口，浏览器默认使用80端口

然后打开本机浏览器，导航栏输入服务器ip地址回车即可查看博客页面

![image-20240123140637108](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123140637108.png)

## 配置文件介绍

初始化完毕后文件结构如下：

```
.
├── _config.yml
├── package.json
├── scaffolds
├── source
|   ├── _drafts
|   └── _posts
└── themes
```

### _config.yml

网站的 [配置](https://hexo.io/zh-cn/docs/configuration) 信息，您可以在此配置大部分的参数。

### package.json

应用程序的信息。[EJS](https://ejs.co/), [Stylus](http://learnboost.github.io/stylus/) 和 [Markdown](http://daringfireball.net/projects/markdown/) 渲染引擎 已默认安装，您可以自由移除

### scaffolds

[模版](https://hexo.io/zh-cn/docs/writing#模版（Scaffold）) 文件夹。当您新建文章时，Hexo 会根据 scaffold 来创建文件

### source

资源文件夹是存放用户资源的地方。除 `_posts` 文件夹之外，开头命名为 `_` (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 `public` 文件夹，而其他文件会被拷贝过去。

### themes

[主题](https://hexo.io/zh-cn/docs/themes) 文件夹。Hexo 会根据主题来生成静态页面。

## 配置

### 基本信息修改

打开`_config.yaml`修改以下记录

![image-20240123145644484](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123145644484.png)

### 主题配置

#### 初始化主题为next

```shell
cd yourBlogFolder
git clone https://github.com/theme-next/hexo-theme-next themes/next
```

修改根目录下的`_config.yaml`的theme

```shell
# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: next
```

效果如下：

![image-20240123150305734](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123150305734.png)

#### 添加标签页和分类页

修改`theme/next/_config.yaml`

取消注释`tags`和`categories`

```shell
# Usage: `Key: /link/ || icon`
# Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.
# Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.
# When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -> archives).
# External url should start with http:// or https://
menu:
  home: / || fa fa-home
  #about: /about/ || fa fa-user
  tags: /tags/ || fa fa-tags
  categories: /categories/ || fa fa-th
  archives: /archives/ || fa fa-archive
  #schedule: /schedule/ || fa fa-calendar
  #sitemap: /sitemap.xml || fa fa-sitemap
  #commonweal: /404/ || fa fa-heartbeat

```

创建标签页面和分类页面

```shell
hexo n page categories
hexo n page tags

# 创建后的目录结构
blog/source
├── categories
│   └── index.md
├── _posts
│   └── hello-world.md
└── tags
    └── index.md
```

修改`blog/source/tags/index.md`

```shell
---
title: 标签
date: 2024-01-23 15:12:20
type: "tags"
---
```

修改`blog/source/categories/index.md`

```shell
---
title: 目录
date: 2024-01-23 15:14:39
type: "categories"
---
```

效果：



![image-20240123151559477](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123151559477.png)

#### 主题样式的更改

修改`theme/next/_config.yaml`

需要用哪个就把哪个的注释打开，其余的都注释掉

```shell
# Schemes
scheme: Muse
#scheme: Mist
#scheme: Pisces
#scheme: Gemini
```

#### 设置主题头像

修改`theme/next/_config.yaml`

修改url后面的图片地址，这里可以是一个url，也可以放到`blog/theme/next/source/images`下面，然后修改为：

```shell
# Sidebar Avatar
avatar:
  # Replace the default image and set the url here.
  #url: /images/markdownheadPhoto.jpg
  url: https://lulu-dt.oss-cn-chengdu.aliyuncs.com/markdownheadPhoto.jpg
  # If true, the avatar will be dispalyed in circle.
  rounded: false
  # If true, the avatar will be rotated with the cursor.
  rotated: false
```

效果：

![image-20240123153112722](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123153112722.png)

#### 启用侧边栏社交链接

TODO(lulu-DT)

#### 开启打赏

#### 开启订阅公众号

#### 设置头像为圆形可旋转

修改`theme/next/_config.yaml`

将`rounded`和`rotated`置为`true`

```shell
# Sidebar Avatar
avatar:
  # Replace the default image and set the url here.
  url: https://lulu-dt.oss-cn-chengdu.aliyuncs.com/markdownheadPhoto.jpg
  # If true, the avatar will be dispalyed in circle.
  rounded: true
  # If true, the avatar will be rotated with the cursor.
  rotated: true

```

效果：

![image-20240123154828536](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123154828536.png)

#### 添加背景彩带

```shell
cd blog/themes/next
git clone https://github.com/theme-next/theme-next-canvas-ribbon source/lib/canvas-ribbon
```

修改`theme/next/_config.yaml`

将enable置为true

```shell
# Canvas-ribbon
# Dependencies: https://github.com/theme-next/theme-next-canvas-ribbon
# For more information: https://github.com/zproo/canvas-ribbon
canvas_ribbon:
  enable: true
  size: 300 # The width of the ribbon
  alpha: 0.6 # The transparency of the ribbon
  zIndex: -1 # The display level of the ribbon
```

效果：

![image-20240123155741850](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123155741850.png)

#### 添加动态背景

#### 添加背景彩带

```shell
cd blog/themes/next
git clone https://github.com/theme-next/theme-next-three source/lib/three
```

修改`theme/next/_config.yaml`

将`enable`和其中一个样式置为`true`

```shell
# JavaScript 3D library.
# Dependencies: https://github.com/theme-next/theme-next-three
three:
  enable: true
  three_waves: true
  canvas_lines: false
  canvas_sphere: false
```

效果：

![image-20240123160401025](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20240123160401025.png)