# 正则表达式

[工具](https://regexper.com/)

## 介绍

正则表达式是一种用于匹配和处理文本模式的表达式。它是由字符和特殊字符组成的序列，用来描述一种字符串的匹配模式。在编程和文本处理中，正则表达式被广泛应用于搜索、替换、验证和提取文本数据。

**正则表达式的功能：**

1. **模式匹配：** 正则表达式可以根据定义的模式在文本中进行搜索和匹配。例如，搜索所有符合特定模式的字符串，如邮箱地址、电话号码等。
2. **文本替换：** 可以使用正则表达式进行文本替换。通过匹配特定模式的字符串并替换成指定的内容，可以对文本进行批量替换操作。
3. **数据验证：** 用于验证输入数据是否符合特定格式。比如验证用户名、密码、邮箱格式是否合法等。
4. **文本提取：** 可以从文本中提取出符合特定模式的内容。例如，从一段文字中提取URL链接、日期、数字等特定格式的信息。
5. **字符串操作：** 可以进行字符串的拆分、合并和其他复杂的操作，以符合特定的模式和要求。

## 正则表达式入门

> 正则表达式由两种字符构成, **元字符**和**文字**
>
> 一个完整的正则表达式由小的**构建模块单元**组成

### 元字符

正则表达式中的元字符是具有特殊含义的字符，它们用于定义匹配模式的基本元素。这些元字符在正则表达式中扮演着特殊角色，代表特定的字符、位置或者数量。

> **“锚定”**： 锚定和匹配有一定的区别，锚定匹配的是一个位置，匹配是指寻找一个具体的文本。
>
> 例如使用`^`锚定开头位置表示你的模式是要从行的开始开始匹配

| 字符 |                         描述                         |
| :--: | :--------------------------------------------------: |
| `^`  | 锚定每一行的开头位置<br />`^cat`： 表示以cat开头的行 |
| `$`  | 锚定每一行的结尾位置<br />`cat$`： 表示以cat结尾的行 |

> `^$`表示什么？
>
> 答案： 空行

### 字符组

正则表达式中的字符组（Character Classes）是一种用于匹配特定字符集合的方法。它们允许定义一个字符集，匹配其中的任意一个字符。

字符组是一对方括号括起来的字符组合， 例如`[12345]`，匹配的时候可以匹配字符组里面的任意一个字符， 相当于一个想要的值的集合,只能选择括号里面的一个进行匹配

例如：

- `[Rr]egular`: 可以匹配`Regular`或者`regular`
- `123[45]67`： 可以匹配`123467`或者`123567`



值得注意的是， 有些字符在字符组内的语义会发生变化

1. `-`

- `-`在字符组外部表示普通字符，即匹配一个`-`

- `-`在字符组里可以表示一个范围， 如`[1-9]`, `[a-z]`分别表示数字1到9的数字的集合和a到z的字符的集合，即`[123456789]`	等价于`[1-9]`
- 如果`-`出现在`[]`内部的开头部分， 那它只是表示一个`-`字符，失去了范围的语义

2. 元字符

- 元字符在字符组里面退化为普通字符，例如`[0-9A-Z!.?*]`里面只有两个`-`有特殊语义

3. `^`

- `^`如果出现在`[]`的开头部分， 表示该字符组是一个**排除型字符组**

> 排除型字符组： 表示除了列举出来的字符之外的全部字符， 相当于取非操作
> 如： 
>
> `[^Rr]egular`: 表示只要不是R和r开头的后续跟上egular的字符串， 例如aegular，begular，3egualr等等



一些常见的字符组包括：

1. **`[abc]`：** 匹配字符集合中的任意一个字符，这里匹配字符 `a`、`b` 或 `c` 中的任意一个。
2. **`[a-z]`：** 表示字符范围，匹配从 `a` 到 `z` 中的任意一个小写字母。
3. **`[A-Z]`：** 同样是字符范围，匹配从 `A` 到 `Z` 中的任意一个大写字母。
4. **`[0-9]`：** 表示匹配任意一个数字。
5. **`[a-zA-Z]`：** 匹配任意一个大小写字母。
6. **`[^abc]`：** 在字符组开头使用 `^`，表示匹配除了字符集合内的字符以外的任意一个字符。



### 用点号来匹配任意字符

`.`也是一个元字符， 它的含义是匹配任意一个字符，这是一个非常常用的模式

eg:

- `.egular`: 可以匹配任意字母开头， egular结尾的字符串，如regular，Regular， aegular，?egular

### 多选结构

`|`是一个元字符，它的含义是“或”，常常用来组合表达式，组合起来的表达式叫多选结构， 它的子表达式叫做多选分支

eg: 

- `Regular|regular`: 表示匹配`Regular`或者`regular`

### 括号

`()`也是元字符， 它作用之一是组成一个模块单元

eg: 

- `(R|r)egular`: 表示匹配`Regular`或者`regular`

> 比较`^Regular|regular`和`^(Regular|regular)`的区别
> 第一个只限定了Regular需要在行的开头， 但是没有限制regular必须在行开头， 第二个则限制了两个都必须出现在行的开头

`()`的另一个作用是**记住**匹配的文本， 使用`\n`来引用记住的文本

eg: 

- `(Regular) is important in \1 Expression`: 可以匹配`Regular is important in Regular Expression`

### 单词分界符

`\<`和`\>`是一对符号， 类似于`^`和`$`， 但是它们是锚定单词的开头和结尾

eg:

- `\<Regular`能够匹配`“Regularabc”`但是不能匹配`“abcRegular”`
- `Regular\>`能够匹配`“abcRegular”`但是不能匹配`“Regularabc”`
- `\<Regular\>`只匹配`“Regular”`，前后不能有字母

![image-20231228173744038](C:/Users/admin/AppData/Roaming/Typora/typora-user-images/image-20231228173744038.png)

### 可选项

`?`在正则表达式里面表示一个可选的字符，通常加到可选字符的后面，表示这个字符可有可无， 如果`?`加在一对括号表示的模块单元后面则表示这个模块是可有可无的

eg:

- `R?egular`可以匹配egular或者Regular

### 重复出现

> `?`, `+`, `*`统称为**量词**

`+`和`*`都表示重复出现

- `+ `表示之前紧邻的那个元素出现一次或者多次
- `*`表示之前紧邻的元素出现任意多次， 包括不出现

eg: 

- `R+egular`可以匹配`RRegular`，`RRRegular`，但是不能匹配`egular`
- `R+egular`可以匹配`RRegular`，`RRRegular`和`egular`



### 转义字符

`\`表示转移， 可以把元字符转为普通字符串进行匹配

eg:

- `\.`匹配句号，而不是任意一个字符



## 正则表达式的匹配原理

正则表达式引擎可以根据实现方式和功能特点进行不同的分类：

1. **基于DFA（Deterministic Finite Automaton）的引擎：** 使用确定性有限状态自动机实现的引擎。这种引擎对于简单的正则表达式可以提供快速的匹配速度，但对于复杂的模式可能性能较差。
2. **基于NFA（Nondeterministic Finite Automaton）的引擎：** 使用非确定性有限状态自动机实现的引擎。NFA引擎通常具有更强大的功能和更灵活的语法支持，但在某些情况下可能会牺牲一些性能。
3. **Backtracking引擎：** 这种引擎使用回溯算法来进行匹配。它能够处理更复杂的正则表达式，但在某些情况下可能会导致性能问题，特别是对于包含大量回溯的表达式。
4. **基于编译的引擎：** 在匹配前将正则表达式转换为内部的优化表示形式。这种引擎能够通过预先编译和优化来提高匹配效率。
5. **多模式匹配引擎：** 允许同时匹配多个模式，提高了处理多种模式的效率。
6. **Unicode兼容引擎：** 针对Unicode字符集提供了更好的支持，能够处理更多语言和字符编码。

这些分类是根据引擎的实现方式、匹配策略和功能特点而来的。不同的引擎可能有不同的优缺点，适合不同类型的正则表达式和应用场景。选择合适的引擎通常取决于需求、性能要求和匹配的复杂度。

## 常用场景



# 速查表

|     字符     |                         描述                         |
| :----------: | :--------------------------------------------------: |
|     `^`      | 锚定每一行的开头位置<br />`^cat`： 表示以cat开头的行 |
|     `$`      | 锚定每一行的结尾位置<br />`cat$`： 表示以cat结尾的行 |
|     `[]`     |                        字符组                        |
|    `[^]`     |                     排除型字符组                     |
|     `.`      |                     匹配任意字符                     |
|     `()`     |                       划分单元                       |
|     `|`      |                       多选结构                       |
|     `\<`     |                     锚定单词开头                     |
|     `\>`     |                     锚定单词结尾                     |
|     `?`      |               加在字符后面，表示可选项               |
|     `+`      |        表示之前紧邻的那个元素出现一次或者多次        |
|     `*`      |     表示之前紧邻的元素出现任意多次， 包括不出现      |
| `{min，max}` |               量词区间， 限定重复次数                |
|              |                                                      |
|              |                                                      |
|              |                                                      |
|              |                                                      |
|              |                                                      |
|              |                                                      |